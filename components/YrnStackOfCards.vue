<i18n lang="yaml">
ar:
  paragraphs:
    - "تهانينا! لقد أظهرتم مهارتكم في هذا النوع من التمارين. تقديرًا لإنجازاتكم، قمت بإنشاء هذه البطاقات الجمعية لكم، تحتوي على معلومات قيمة حول مختلف أنواع النباتات والحيوانات في الحديقة الوطنية تيدي."
    - "تتضمن كل بطاقة صورة ممثلة للنوع، اسمه الشائع، اسمه العلمي، وصفًا موجزًا، زرًا للوصول للأشخاص ذوي الإعاقة السمعية، ورابطًا لصفحة النوع على كاناريويكي."
    - "نشجعكم على استكشاف وجمع جميع البطاقات، مما يتيح لكم اكتشاف الأسرار والعجائب التي تحتضنها حديقتنا الوطنية الأكثر شهرة."
    - "تذكروا أنه يمكنكم الوصول في أي وقت إلى قسم 'الإنجازات' ومشاهدة جميع البطاقات الجمعية. استمتعوا بهذه المغامرة التعليمية!"
ca:
  paragraphs:
    - "Felicitats! Heu demostrat que domineu aquest tipus d'exercicis. En reconeixement als vostres èxits, he creat per a vosaltres aquestes cartes col·leccionables que contenen informació valuosa sobre diverses espècies de la flora i la fauna del Parc Nacional del Teide."
    - "Cada carta conté una foto representativa de l'espècie, el seu nom comú, el seu nom científic, una breu descripció, un botó accessible per a persones amb discapacitat auditiva i, un enllaç a la pàgina de l'espècie a CanariWiki."
    - "Us animo a explorar i col·leccionar totes les cartes, permetent-vos descobrir els secrets i meravelles que alberga el nostre Parc Nacional més emblemàtic."
    - "Recordeu que podeu accedir en qualsevol moment a la secció 'Premis' i veure totes les cartes col·leccionables. Gaudeixeu d'aquesta aventura d'aprenentatge!"
de:
  paragraphs:
    - "Herzlichen Glückwunsch! Sie haben gezeigt, dass Sie diese Art von Übung beherrschen. Als Anerkennung für Ihre Leistungen habe ich für Sie diese Sammelkarten erstellt, die wertvolle Informationen über verschiedene Arten der Flora und Fauna des Teide-Nationalparks enthalten."
    - "Jede Karte enthält ein repräsentatives Foto der Art, ihren gebräuchlichen Namen, ihren wissenschaftlichen Namen, eine kurze Beschreibung, eine Barrierefreiheitsschaltfläche für Hörgeschädigte und einen Link zur Artenseite auf CanariWiki."
    - "Ich ermutige Sie, alle Karten zu erkunden und zu sammeln, um die Geheimnisse und Wunder zu entdecken, die unser bekanntester Nationalpark birgt."
    - "Denken Sie daran, dass Sie jederzeit auf den Abschnitt 'Errungenschaften' zugreifen und alle Sammelkarten anzeigen können. Genießen Sie dieses Lernabenteuer!"
es:
  paragraphs:
    - "¡Felicidades! Habéis demostrado que domináis este tipo de ejercicios. En reconocimiento a vuestros logros, he creado para vosotros estas cartas coleccionables que contienen información valiosa acerca de diversas especies de la flora y la fauna del Parque Nacional del Teide."
    - "Cada carta contiene una foto representativa de la especie, su nombre común, su nombre científico, una pequeña descripción, un botón accesible para personas con discapacidad auditiva y, un enlace a la página de la especie en CanariWiki."
    - "Les animo a explorar y coleccionar todas las cartas, permitiéndles descubrir los secretos y maravillas que alberga nuestro Parque Nacional más emblemático."
    - "Recordad que podéis acceder en cualquier momento a la sección \"Logros\" y ver todas las cartas coleccionables, ¡disfrutad de esta aventura de aprendizaje!"
eu:
  paragraphs:
    - "Zorionak! Arazo mota hauetan dominatzen duzula erakutsi duzue. Zure arrakasten ohorez, sortu ditut zuei karta bildumak, Teideko Parke Nazionalaren lore eta fauna espezie ezberdinak inguruko informazio baliagarriaz hornitzen dutenak."
    - "Bakoitza espeziearen irudia, bere izen arrunta, izen zientifikoa, laburdeskripzioa, entzumen arazoak dituztenentzako botoa eta CanariWikiko espezie-orrialdeko esteka ditu karta bakoitzak."
    - "Anima zaitezte kartak esploratzen eta bildutzen, gure Parke Nazionalenik ikonikoena duten sekretuak eta harritzekoa aurkituz."
    - "Gogoratu 'Arrakastak' atalean orduan eta bertan bildutako kartak ikusi ahal izango dituzula. Gozatu ikasketa abentura hau!"
gl:
  paragraphs:
    - "¡Parabéns! Demostrastes que dominades este tipo de exercicios. En recoñecemento dos vosos logros, criei para vós estas tarxetas coleccionables que conteñen información valiosa sobre diversas especies da flora e a fauna do Parque Nacional do Teide."
    - "Cada tarxeta contén unha foto representativa da especie, o seu nome común, o seu nome científico, unha pequena descrición, un botón accesible para persoas con discapacidade auditiva e unha ligazón á páxina da especie en CanariWiki."
    - "Anímovos a explorar e colleitar todas as tarxetas, permitíndovos descubrir os segredos e as marabillas que agochan o noso Parque Nacional máis emblemático."
    - "Lembrai que podedes acceder en calquera momento á sección 'Logros' e ver todas as tarxetas coleccionables. ¡Gozade desta aventura de aprendizaxe!"
it:
  paragraphs:
    - "Congratulazioni! Avete dimostrato di padroneggiare questo tipo di esercizio. In riconoscimento dei vostri successi, ho creato per voi queste carte collezionabili che contengono informazioni preziose su varie specie della flora e della fauna del Parco Nazionale del Teide."
    - "Ogni carta contiene una foto rappresentativa della specie, il suo nome comune, il suo nome scientifico, una breve descrizione, un pulsante di accessibilità per persone con disabilità uditiva e un link alla pagina della specie su CanariWiki."
    - "Vi incoraggio ad esplorare e collezionare tutte le carte, permettendovi di scoprire i segreti e le meraviglie che custodisce il nostro Parco Nazionale più emblematico."
    - "Ricordate che potete accedere in qualsiasi momento alla sezione 'Realizzazioni' e visualizzare tutte le carte collezionabili. Godetevi questa avventura di apprendimento!"
ja:
  paragraphs:
    - "おめでとうございます！ この種の演習をマスターしたことを証明しました。 あなたの成果を称えて、テイデ国立公園のさまざまな植物や動物の貴重な情報を含むこれらのコレクタブルカードを作成しました。"
    - "各カードには、その種の代表的な写真、一般名、学名、簡単な説明、聴覚障害者用のアクセシビリティボタン、およびCanariWikiの種のページへのリンクが含まれています。"
    - "すべてのカードを探索して収集することをお勧めします。これにより、最も象徴的な国立公園で保持されている秘密や驚異を発見できます。"
    - "いつでも「実績」セクションにアクセスし、すべてのコレクタブルカードを表示できることを忘れないでください。この学習の冒険をお楽しみください！"
pt:
  paragraphs:
    - "Parabéns! Vocês demonstraram dominar este tipo de exercício. Em reconhecimento aos vossos feitos, criei para vocês estes cartões colecionáveis que contêm informações valiosas sobre várias espécies de flora e fauna do Parque Nacional do Teide."
    - "Cada cartão apresenta uma foto representativa da espécie, o seu nome comum, o seu nome científico, uma breve descrição, um botão de acessibilidade para pessoas com deficiência auditiva e um link para a página da espécie na CanariWiki."
    - "Encorajo-vos a explorar e colecionar todos os cartões, permitindo-vos descobrir os segredos e maravilhas que o nosso Parque Nacional mais emblemático guarda."
    - "Lembrem-se que podem aceder a qualquer momento à secção 'Conquistas' e ver todos os cartões colecionáveis. Desfrutem desta aventura de aprendizagem!"
ro:
  paragraphs:
    - "Felicitări! Ați demonstrat că dominați acest tip de exercițiu. În recunoașterea realizărilor voastre, am creat pentru voi aceste cărți de colecție care conțin informații valoroase despre diverse specii de floră și faună din Parcul Național Teide."
    - "Fiecare carte conține o fotografie reprezentativă a speciei, numele său comun, numele său științific, o scurtă descriere, un buton de accesibilitate pentru persoanele cu deficiențe de auz și un link către pagina speciei pe CanariWiki."
    - "Vă încurajez să explorați și să colectați toate cărțile, permițându-vă să descoperiți secretele și minunile pe care le adăpostește cel mai emblematic parc național al nostru."
    - "Rețineți că puteți accesa oricând secțiunea 'Realizări' și să vizualizați toate cărțile de colecție. Bucurați-vă de această aventură de învățare!"
ru:
  paragraphs:
    - "Поздравляю! Вы продемонстрировали, что владеете этим типом упражнений. В знак признательности за ваши достижения, я создал для вас эти коллекционные карточки, содержащие ценную информацию о различных видах флоры и фауны Национального парка Тейде."
    - "Каждая карточка содержит репрезентативное фото вида, его общее название, научное название, краткое описание, кнопку доступности для людей с нарушениями слуха и ссылку на страницу вида на CanariWiki."
    - "Я призываю вас исследовать и собрать все карточки, что позволит вам открывать секреты и чудеса, которые скрывает наш самый популярный национальный парк."
    - "Помните, что вы можете в любое время получить доступ к разделу 'Достижения' и просмотреть все коллекционные карточки. Наслаждайтесь этим учебным приключением!"
zh:
  paragraphs:
    - "恭喜！ 您已证明掌握了这种类型的练习。 为了表彰您的成就, 我为您创建了这些可收藏的卡片, 其中包含了关于泰德国家公园各种植物和动物物种的宝贵信息。"
    - "每张卡片都包含该物种的代表性照片, 其通用名称, 其科学名称, 简要描述, 针对听力障碍者的可访问性按钮以及指向CanariWiki物种页面的链接。"
    - "我鼓励您探索和收集所有卡片, 以便发现我们最具代表性的国家公园所隐藏的秘密和奇迹。"
    - "请记住, 您随时可以访问“成就”部分并查看所有可收藏的卡片。享受这次学习之旅！"
</i18n>

<template>
  <v-row class="yrn-stack-of-cards mb-10">
    <v-col
      class="d-flex-column"
      cols="12"
      sm="12"
      md="5"
    >
      <yrn-memoji
        :max-width="maxMemojiWidth"
        :memoji-name="memojiName"
        class="mx-auto"
      />
      <yrn-alert-text-stepper
        border="top"
        :paragraphs="$t('paragraphs')"
      />
    </v-col>
    <v-col
      class="d-flex justify-center ml-8 ml-md-0"
      cols="12"
      sm="12"
      md="7"
    >
      <vue-card-stack
        :cards="cards"
        :max-visible-cards="6"
        :scale-multiplier="0.5"
        :stack-width="$vuetify.breakpoint.xs ? 0 : 480"
        style="height: 530px;"
        @move="handleMove"
      >
        <template #card="{ card }">
          <yrn-collection-card
            :class="{
              'top-card-moved-left': isCardMovedLeft,
              'top-card-moved-right': isCardMovedRight,
              'top-card-stopped': isCardStopped,
            }"
            :image="card.image"
            :link="card.link"
            :subtitle="card.scientificName"
            :text="card.description?.[$i18n.locale]"
            :title="card.name?.[$i18n.locale]"
            style="height: 100%; width: 100%;"
          />
        </template>
        <template #nav="{ onNext, onPrevious }">
          <nav>
            <v-btn icon @click="onPrevious">
              <v-icon>
                mdi-chevron-left
              </v-icon>
            </v-btn>
            <v-btn icon @click="onNext">
              <v-icon>
                mdi-chevron-right
              </v-icon>
            </v-btn>
          </nav>
        </template>
      </vue-card-stack>
    </v-col>
  </v-row>
</template>

<script>
/** 
 * @link https://rodleviton.github.io/vue-card-stack/
 * @link https://github.com/rodleviton/vue-card-stack/
 */
import VueCardStack from 'vue-card-stack'

export default {
  name: 'YrnStackOfCards',
  components: {
    VueCardStack
  },
  props: {
    activityId: {
      required: true,
      type: [Number, String]
    },
    challengeId: {
      required: true,
      type: [Number, String]
    },
    exerciseId: {
      required: true,
      type: [Number, String]
    },
    maxMemojiWidth: {
      default: '50%',
      required: false,
      type: [Number, String]
    },
    memojiName: {
      default: 'director-señalando',
      required: false,
      type: String
    }
  },
  data() {
    return {
      isCardMovedLeft: false, 
      isCardMovedRight: false,
      isCardStopped: true
    }
  },
  computed: {
    cards() {
      return this.$store?.getters['learningUnit/getExercise'](
        this.activityId,
        this.challengeId,
        this.exerciseId
      )?.solution?.items ?? []
    }
  },
  methods: {
    handleMove(movement) {
      if (movement < 0) {
        this.isCardMovedLeft = true
        this.isCardMovedRight = false
        this.isCardStopped = false
      } else if (movement > 0) {
        this.isCardMovedLeft = false
        this.isCardMovedRight = true
        this.isCardStopped = false
      } else {
        this.isCardMovedLeft = false
        this.isCardMovedRight = false
        this.isCardStopped = true
      }
    }
  }
}
</script>

<style lang="scss">
.yrn-stack-of-cards {
  .vue-card-stack {
    &__wrapper {
      width: 85vw;

      nav {
        position: relative;
        top: -40px;
        left: 15px;
      }
    }

    &__stack {
      height: 100% !important;
      width: 100% !important;
    }

    &__card:nth-of-type(3),
    &__card:nth-of-type(4),
    &__card:nth-of-type(5),
    &__card:nth-of-type(6) {
      filter: blur(2px);
    }

    // Mixin for transforming top cards of the stack
    @mixin transform-top-card($scale, $rotate, $translateY) {
      transform: scale($scale) rotate($rotate) translateY($translateY);
    }

    // Top cards of the stack
    &__card:nth-of-type(1),
    &__card:nth-of-type(2) {
      filter: blur(0);
      
      .yrn-collection-card {
        transition: transform 0.2s ease 0s;

        &.top-card-stopped {
          @include transform-top-card(1, 0, 0);
        }
      }
    }

    // Card coming from the right side, outside the stack,
    // that will be placed on top of the stack
    &__card:nth-of-type(1) {
      .yrn-collection-card {
        &.top-card-moved-left {
          @include transform-top-card(1.05, 3deg, -20px);
        }
      }
    }

    // Visible top card of the stack
    &__card:nth-of-type(2) {
      .yrn-collection-card {
        &.top-card-moved-right {
          @include transform-top-card(1.05, -3deg, -20px);
        }
      }
    }
  }

  @media (width <=  599px) {
    .vue-card-stack {
      &__wrapper {
        width: 100vw;
      }
    }
  }
}
</style>
